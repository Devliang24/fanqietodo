# ç•ªèŒ„todo - å¼€æºæ™ºèƒ½ä»»åŠ¡ç®¡ç†åº”ç”¨ (macOS ä¸“ç‰ˆ)

## é¡¹ç›®æ¦‚è¿°

ä¸€æ¬¾**å…è´¹å¼€æº**çš„æ™ºèƒ½ ToDo æ¡Œé¢åº”ç”¨,ç”¨æˆ·å¯è‡ªè¡Œæ¥å…¥ API Key ä½¿ç”¨ AI åŠŸèƒ½ã€‚

**é¡¹ç›®å®šä½:**

* ğŸ†“ **å®Œå…¨å…è´¹** - å¼€æºé¡¹ç›®,MIT è®¸å¯è¯
* ğŸ”‘ **è‡ªå¸¦ Key** - ç”¨æˆ·é…ç½®è‡ªå·±çš„é˜¿é‡Œäº‘ç™¾ç‚¼ API Key
* ğŸ“¦ **GitHub å¼€æº** - æ¬¢è¿ç¤¾åŒºè´¡çŒ®

**æ ¸å¿ƒç‰¹æ€§:**

* ğŸ“ æ ‡å‡† ToDo åŠŸèƒ½ (CRUDã€åˆ†ç±»ã€ä¼˜å…ˆçº§)
* ğŸ¤– AI èƒ½åŠ›: ä»»åŠ¡æ™ºèƒ½æ‹†è§£ã€è‡ªåŠ¨åˆ†ç±»ã€ä¼˜å…ˆçº§å»ºè®®ã€è‡ªç„¶è¯­è¨€è¾“å…¥
* âœ¨ **ç®€æ´æ˜“ç”¨** - æç®€è®¾è®¡,é›¶å­¦ä¹ æˆæœ¬
* â˜ï¸ æ”¯æŒé˜¿é‡Œäº‘ç™¾ç‚¼ API (Qwen ç³»åˆ—æ¨¡å‹)
* ğŸ” API Key æœ¬åœ°å®‰å…¨å­˜å‚¨
* ğŸ **macOS ä¸“å±** - é’ˆå¯¹ Apple Silicon (M1/M2/M3/M4) ä¼˜åŒ–

## ç•Œé¢è®¾è®¡åŸåˆ™

### è®¾è®¡ç†å¿µ

* **æç®€ä¸»ä¹‰** - å»é™¤ä¸€åˆ‡ä¸å¿…è¦çš„å…ƒç´ ,åªä¿ç•™æ ¸å¿ƒåŠŸèƒ½
* **å³æ—¶å¯ç”¨** - æ‰“å¼€å³ç”¨,æ— éœ€æ•™ç¨‹
* **ä¸€é”® AI** - AI åŠŸèƒ½è§¦æ‰‹å¯åŠ,ä¸æ‰“æ–­å·¥ä½œæµ

### ä¸»ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ç•ªèŒ„todo                    [âš™ï¸]  â”‚  <- é¡¶æ : æ ‡é¢˜ + è®¾ç½®æŒ‰é’®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â• è¾“å…¥ä»»åŠ¡... (AIè‡ªåŠ¨è§£æ)    [âœ¨]  â”‚  â”‚  <- è¾“å…¥æ¡† + AIæŒ‰é’®
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…¨éƒ¨(5)  ä»Šå¤©(2)  å·²å®Œæˆ(3)               â”‚  <- ç®€å•ç­›é€‰Tab
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â—‹ å®Œæˆé¡¹ç›®æŠ¥å‘Š            ğŸ”´ æ˜å¤©   [âœ¨]  â”‚  <- ä»»åŠ¡é¡¹: 
â”‚     â”” â—‹ æ•´ç†æ•°æ®                              â”‚     çŠ¶æ€/æ ‡é¢˜/ä¼˜å…ˆçº§/
â”‚     â”” â—‹ å†™æ‘˜è¦                              â”‚     æˆªæ­¢æ—¥æœŸ/AIæ‹†è§£
â”‚     â”” â—‹ åˆ¶ä½œ PPT                            â”‚
â”‚                                             â”‚
â”‚  â— ä¹°ç”Ÿæ´»ç”¨å“              ğŸŸ¡ åå¤©       â”‚
â”‚                                             â”‚
â”‚  â—‹ å­¦ä¹  Rust                ğŸŸ¢ æœ¬å‘¨       â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒäº¤äº’

1. **æ·»åŠ ä»»åŠ¡** - å›è½¦å³æ·»åŠ ,æ”¯æŒè‡ªç„¶è¯­è¨€ ("æ˜å¤© å¼€ä¼š" â†’ è‡ªåŠ¨è§£ææˆªæ­¢æ—¥æœŸ)
2. **AI æ‹†è§£** - ç‚¹å‡» [âœ¨] æŒ‰é’®å°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºå­ä»»åŠ¡
3. **å®Œæˆä»»åŠ¡** - ç‚¹å‡»åœ†åœˆåˆ‡æ¢çŠ¶æ€
4. **ç¼–è¾‘/åˆ é™¤** - å³é”®èœå•æˆ–æ‚¬åœæ˜¾ç¤º

### è®¾ç½®é¡µ (ç®€çº¦)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è®¾ç½®                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AI é…ç½®                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ API Key: sk-xxx...     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  æ¨¡å‹: [qwen-turbo â–¼]         â”‚
â”‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤–è§‚                           â”‚
â”‚  ä¸»é¢˜: [æµ…è‰² â–¼]               â”‚
â”‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…³äº                           â”‚
â”‚  ç‰ˆæœ¬: 1.0.0                    â”‚
â”‚  [GitHub] [API Key æŒ‡å—]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è§†è§‰é£æ ¼

* **é…è‰²**: ä¸»è‰²è°ƒç®€æ´,ä»…ç”¨é¢œè‰²åŒºåˆ†ä¼˜å…ˆçº§ (ğŸ”´é«˜ ğŸŸ¡ä¸­ ğŸŸ¢ä½)
* **å­—ä½“**: ç³»ç»Ÿé»˜è®¤å­—ä½“,èˆ’é€‚é˜…è¯»
* **åŠ¨ç”»**: å¾®å¦™è¿‡æ¸¡,ä¸æŠ¢ç„¦ç‚¹
* **é—´è·**: å……è¶³ç•™ç™½,é¿å…æ‹¥æŒ¤

## æŠ€æœ¯é€‰å‹

### å‰ç«¯

* **UI æ¡†æ¶**: React 18 + TypeScript - ç”Ÿæ€æˆç†Ÿã€ç±»å‹å®‰å…¨
* **çŠ¶æ€ç®¡ç†**: Zustand - è½»é‡ç®€æ´
* **UI ç»„ä»¶åº“**: shadcn/ui + Tailwind CSS - ç°ä»£è®¾è®¡
* **æ„å»ºå·¥å…·**: Vite - å¿«é€Ÿå¼€å‘ä½“éªŒ

### åç«¯ (Rust)

* **æ¡†æ¶**: Tauri 2.x - ä½¿ç”¨ macOS åŸç”Ÿ WKWebView
* **æ•°æ®åº“**: SQLite + sqlx - æœ¬åœ°å¼‚æ­¥å­˜å‚¨
* **AI è°ƒç”¨**: reqwest + serde - è°ƒç”¨ç™¾ç‚¼ API
* **å®‰å…¨å­˜å‚¨**: macOS Keychain (keyring) - API Key å­˜å…¥ç³»ç»Ÿé’¥åŒ™ä¸²; `tauri-plugin-store` ä»…ä¿å­˜éæ•æ„Ÿè®¾ç½®(å¦‚æ¨¡å‹)

### macOS ä¸“å±ä¼˜åŒ–

* **æ„å»ºç›®æ ‡**: aarch64-apple-darwin (Apple Silicon åŸç”Ÿ)
* **WebView**: WKWebView (macOS ç³»ç»Ÿå†…ç½®)
* **å®‰è£…åŒ…**: DMG æ ¼å¼
* **æœ€ä½ç³»ç»Ÿè¦æ±‚**: macOS 11.0+ (Big Sur)

### é˜¿é‡Œäº‘ç™¾ç‚¼æ¨¡å‹

* **qwen-turbo** (é»˜è®¤) - å¿«é€Ÿã€ä½æˆæœ¬,é€‚åˆæ—¥å¸¸ä½¿ç”¨
* **qwen-plus** - å¹³è¡¡æ€§èƒ½ä¸æˆæœ¬
* **qwen-max** - å¤æ‚ä»»åŠ¡åˆ†æ
* **deepseek-r1** - å¼ºæ¨ç†èƒ½åŠ› (é™æ—¶å…è´¹,ä»¥å®˜æ–¹å¯ç”¨æ€§/ä»·æ ¼ä¸ºå‡†)

## é¡¹ç›®ç»“æ„

```
ai-todo/
â”œâ”€â”€ src/                          # React å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ components/               # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TodoList/
â”‚   â”‚   â”œâ”€â”€ TodoItem/
â”‚   â”‚   â”œâ”€â”€ AIAssistant/
â”‚   â”‚   â””â”€â”€ Settings/
â”‚   â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ stores/                   # Zustand stores
â”‚   â”œâ”€â”€ types/                    # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ lib/                      # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ src-tauri/                    # Tauri Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs               # å…¥å£
â”‚   â”‚   â”œâ”€â”€ lib.rs                # åº“å…¥å£
â”‚   â”‚   â”œâ”€â”€ commands/             # Tauri å‘½ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ todo.rs           # ToDo CRUD å‘½ä»¤
â”‚   â”‚   â”‚   â””â”€â”€ ai.rs             # ç™¾ç‚¼ API è°ƒç”¨å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ db/                   # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â””â”€â”€ schema.rs
â”‚   â”‚   â”œâ”€â”€ ai/                   # ç™¾ç‚¼ API æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ client.rs         # HTTP å®¢æˆ·ç«¯å°è£…
â”‚   â”‚   â”‚   â””â”€â”€ prompts.rs        # Prompt æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ migrations/               # SQLite è¿ç§»æ–‡ä»¶
â”‚   â”œâ”€â”€ capabilities/             # Tauri æƒé™é…ç½®
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ tauri.conf.json
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tsconfig.json
```

## æ•°æ®æ¨¡å‹è®¾è®¡

### SQLite Schema

```sql
-- ä»»åŠ¡è¡¨
CREATE TABLE todos (
    id TEXT PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    status TEXT NOT NULL DEFAULT 'pending',  -- pending, in_progress, completed
    priority INTEGER DEFAULT 2,               -- 1:é«˜, 2:ä¸­, 3:ä½
    category TEXT,
    due_date INTEGER,                         -- Unix timestamp
    created_at INTEGER NOT NULL,
    updated_at INTEGER NOT NULL,
    parent_id TEXT,                           -- çˆ¶ä»»åŠ¡ID (ç”¨äºå­ä»»åŠ¡)
    ai_generated BOOLEAN DEFAULT FALSE,       -- æ˜¯å¦AIç”Ÿæˆ
    FOREIGN KEY (parent_id) REFERENCES todos(id)
);

-- åˆ†ç±»è¡¨
CREATE TABLE categories (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    color TEXT,
    icon TEXT
);

-- AI ä¼šè¯å†å² (ç”¨äºä¸Šä¸‹æ–‡)
CREATE TABLE ai_sessions (
    id TEXT PRIMARY KEY,
    todo_id TEXT,
    prompt TEXT NOT NULL,
    response TEXT,
    created_at INTEGER NOT NULL,
    FOREIGN KEY (todo_id) REFERENCES todos(id)
);
```

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### Phase 1: åŸºç¡€æ¡†æ¶æ­å»º (2-3å¤©)

**ç›®æ ‡:** å®Œæˆé¡¹ç›®è„šæ‰‹æ¶å’ŒåŸºç¡€ ToDo åŠŸèƒ½

1. **é¡¹ç›®åˆå§‹åŒ–**
    * ä½¿ç”¨ `create-tauri-app` åˆ›å»ºé¡¹ç›® (React + TypeScript + Vite)
    * é…ç½® Tailwind CSS å’Œ shadcn/ui
    * è®¾ç½® ESLintã€Prettier

2. **æ•°æ®åº“é›†æˆ**
    * æ·»åŠ  `sqlx` ä¾èµ– (features: sqlite, runtime-tokio-rustls)
    * å®ç°æ•°æ®åº“åˆå§‹åŒ–å’Œè¿ç§»
    * åˆ›å»º Todo CRUD å‘½ä»¤

3. **åŸºç¡€ UI**
    * TodoList ç»„ä»¶
    * TodoItem ç»„ä»¶ (å«çŠ¶æ€åˆ‡æ¢ã€ç¼–è¾‘ã€åˆ é™¤)
    * æ·»åŠ ä»»åŠ¡è¡¨å•

### Phase 2: ToDo åŠŸèƒ½å®Œå–„ (2-3å¤©)

**ç›®æ ‡:** ç®€æ´æ˜“ç”¨çš„ä»»åŠ¡ç®¡ç†

1. **ä»»åŠ¡ç®¡ç†å¢å¼º**
    * ç®€å•åˆ†ç±» (å·¥ä½œ/ç”Ÿæ´»/å­¦ä¹ /å…¶ä»–)
    * ä¼˜å…ˆçº§è®¾ç½® (çº¢/é»„/ç»¿ ä¸‰çº§)
    * æˆªæ­¢æ—¥æœŸ
    * å­ä»»åŠ¡æ”¯æŒ (AI æ‹†è§£ç”Ÿæˆ)

2. **ç”¨æˆ·ä½“éªŒ**
    * å¿«æ·é”®: Enter æ·»åŠ , Esc å–æ¶ˆ
    * ç®€å•ç­›é€‰: å…¨éƒ¨/ä»Šå¤©/å·²å®Œæˆ
    * æš—è‰²æ¨¡å¼

3. **æ•°æ®æŒä¹…åŒ–**
    * è‡ªåŠ¨ä¿å­˜ (æ— æ„ŸçŸ¥)

### Phase 3: ç™¾ç‚¼ API é›†æˆ (2-3å¤©)

**ç›®æ ‡:** é›†æˆé˜¿é‡Œäº‘ç™¾ç‚¼ APIï¼Œå®ç° AI åŠŸèƒ½

1. **ç™¾ç‚¼ API å®¢æˆ·ç«¯**

```rust
// src-tauri/src/ai/client.rs
use reqwest::Client;
use serde::{Deserialize, Serialize};

const DASHSCOPE_API_URL: &str = "https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions";

#[derive(Serialize)]
pub struct ChatRequest {
    pub model: String,
    pub messages: Vec<Message>,
    #[serde(skip_serializing_if = "Option::is_none")]
    pub stream: Option<bool>,
}

#[derive(Serialize, Deserialize)]
pub struct Message {
    pub role: String,
    pub content: String,
}

pub struct DashScopeClient {
    client: Client,
    api_key: String,
}

impl DashScopeClient {
    pub fn new(api_key: String) -> Self {
        Self {
            client: Client::new(),
            api_key,
        }
    }

    pub async fn chat(&self, model: &str, messages: Vec<Message>) -> Result<String, reqwest::Error> {
        let request = ChatRequest {
            model: model.to_string(),
            messages,
            stream: Some(false),
        };

        let response = self.client
            .post(DASHSCOPE_API_URL)
            .header("Authorization", format!("Bearer {}", self.api_key))
            .header("Content-Type", "application/json")
            .json(&request)
            .send()
            .await?
            .json::<serde_json::Value>()
            .await?;

        Ok(response["choices"][0]["message"]["content"].as_str().unwrap_or_default().to_string())
    }
}
```

2. **API Key å®‰å…¨å­˜å‚¨**
    * ä½¿ç”¨ `tauri-plugin-store` åŠ å¯†å­˜å‚¨
    * é¦–æ¬¡å¯åŠ¨å¼•å¯¼ç”¨æˆ·é…ç½® API Key
    * æ”¯æŒåœ¨è®¾ç½®ä¸­ä¿®æ”¹

3. **AI åŠŸèƒ½å®ç°**
    * **ä»»åŠ¡æ™ºèƒ½æ‹†è§£**: å°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œå­ä»»åŠ¡
    * **è‡ªåŠ¨åˆ†ç±»**: æ ¹æ®ä»»åŠ¡å†…å®¹å»ºè®®åˆ†ç±»
    * **ä¼˜å…ˆçº§å»ºè®®**: åŸºäºæˆªæ­¢æ—¥æœŸå’Œå†…å®¹åˆ†æ
    * **è‡ªç„¶è¯­è¨€è¾“å…¥**: ä»è‡ªç„¶è¯­è¨€è§£æä»»åŠ¡ä¿¡æ¯

### Phase 4: AI äº¤äº’ä¼˜åŒ– (2å¤©)

**ç›®æ ‡:** æµç•…çš„ AI äº¤äº’ä½“éªŒ

1. **æµå¼è¾“å‡º (SSE)**

```rust
// æµå¼è¯·æ±‚ç¤ºä¾‹
pub async fn chat_stream(&self, model: &str, messages: Vec<Message>) -> Result<impl Stream<Item = String>, Error> {
    let request = ChatRequest {
        model: model.to_string(),
        messages,
        stream: Some(true),
    };

    let response = self.client
        .post(DASHSCOPE_API_URL)
        .header("Authorization", format!("Bearer {}", self.api_key))
        .json(&request)
        .send()
        .await?;

    // è§£æ SSE æµ
    Ok(response.bytes_stream().map(|chunk| {
        // è§£æ data: {...} æ ¼å¼
        parse_sse_chunk(chunk)
    }))
}
```

2. **Prompt å·¥ç¨‹**

```rust
// src-tauri/src/ai/prompts.rs
pub const TASK_BREAKDOWN_PROMPT: &str = r#"ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡è§„åˆ’åŠ©æ‰‹ã€‚å°†ç”¨æˆ·çš„ä»»åŠ¡åˆ†è§£ä¸ºå…·ä½“ã€å¯æ‰§è¡Œçš„å­ä»»åŠ¡ã€‚

è§„åˆ™:
1. æ¯ä¸ªå­ä»»åŠ¡åº”è¯¥æ˜¯ä¸€ä¸ªæ¸…æ™°çš„è¡ŒåŠ¨é¡¹
2. å­ä»»åŠ¡æ•°é‡æ§åˆ¶åœ¨3-7ä¸ª
3. æŒ‰é€»è¾‘é¡ºåºæ’åˆ—
4. è¾“å‡ºJSONæ ¼å¼: [{"title": "å­ä»»åŠ¡æ ‡é¢˜", "priority": 1-3}]

ç”¨æˆ·ä»»åŠ¡: {task}"#;

pub const AUTO_CATEGORIZE_PROMPT: &str = r#"æ ¹æ®ä»»åŠ¡å†…å®¹,ä»ä»¥ä¸‹åˆ†ç±»ä¸­é€‰æ‹©æœ€åˆé€‚çš„ä¸€ä¸ª:
["å·¥ä½œ", "å­¦ä¹ ", "ç”Ÿæ´»", "å¥åº·", "è´¢åŠ¡", "å¨±ä¹", "å…¶ä»–"]

åªè¾“å‡ºåˆ†ç±»åç§°,ä¸è¦å…¶ä»–å†…å®¹ã€‚

ä»»åŠ¡: {task}"#;

pub const PARSE_NATURAL_LANGUAGE_PROMPT: &str = r#"ä»ç”¨æˆ·è¾“å…¥ä¸­æå–ä»»åŠ¡ä¿¡æ¯,è¾“å‡ºJSON:
{"title": "ä»»åŠ¡æ ‡é¢˜", "due_date": "YYYY-MM-DDæˆ–null", "priority": 1-3, "category": "åˆ†ç±»"}

ç”¨æˆ·è¾“å…¥: {input}"#;
```

3. **é”™è¯¯å¤„ç†ä¸é‡è¯•**
    * API è°ƒç”¨å¤±è´¥è‡ªåŠ¨é‡è¯• (3æ¬¡)
    * ç½‘ç»œé”™è¯¯å‹å¥½æç¤º
    * API Key æ— æ•ˆæç¤ºç”¨æˆ·é‡æ–°é…ç½®

### Phase 5: ä¼˜åŒ–ä¸æ‰“åŒ… (2å¤©)

**ç›®æ ‡:** ç”Ÿäº§çº§è´¨é‡

1. **æ€§èƒ½ä¼˜åŒ–**
    * è¯·æ±‚å¹¶å‘æ§åˆ¶
    * å“åº”ç¼“å­˜ (ç›¸åŒä»»åŠ¡ä¸é‡å¤è¯·æ±‚)
    * è¶…æ—¶å¤„ç†

2. **macOS æ‰“åŒ…**
    * é…ç½® `tauri.conf.json` (identifier, icons)
    * Apple Silicon åŸç”Ÿæ„å»º (aarch64-apple-darwin)
    * DMG æ‰“åŒ…
    * (å¯é€‰) ä»£ç ç­¾å + å…¬è¯

3. **ç”¨æˆ·ä½“éªŒ**
    * é¦–æ¬¡å¯åŠ¨ API Key é…ç½®å¼•å¯¼
    * æ¨¡å‹é€‰æ‹©è®¾ç½®
    * ç”¨é‡ç»Ÿè®¡æ˜¾ç¤º
    * é”™è¯¯å¤„ç†å’Œæç¤º

## å…³é”®ä»£ç ç¤ºä¾‹

### Rust ç™¾ç‚¼ API å‘½ä»¤

```rust
// src-tauri/src/commands/ai.rs
use crate::ai::{DashScopeClient, Message, TASK_BREAKDOWN_PROMPT};
use tauri::State;
use std::sync::Arc;
use tokio::sync::RwLock;

pub struct AppState {
    pub ai_client: Arc<RwLock<Option<DashScopeClient>>>,
    pub model: String,  // é»˜è®¤æ¨¡å‹: qwen-turbo
}

#[derive(serde::Serialize, serde::Deserialize)]
pub struct SubTask {
    pub title: String,
    pub priority: u8,
}

#[tauri::command]
pub async fn set_api_key(
    state: State<'_, AppState>,
    api_key: String,
) -> Result<(), String> {
    let client = DashScopeClient::new(api_key);
    *state.ai_client.write().await = Some(client);
    Ok(())
}

#[tauri::command]
pub async fn breakdown_task(
    state: State<'_, AppState>,
    task: String,
) -> Result<Vec<SubTask>, String> {
    let client_guard = state.ai_client.read().await;
    let client = client_guard.as_ref().ok_or("è¯·å…ˆé…ç½® API Key")?;

    let prompt = TASK_BREAKDOWN_PROMPT.replace("{task}", &task);
    let messages = vec![
        Message { role: "system".to_string(), content: "ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡è§„åˆ’åŠ©æ‰‹".to_string() },
        Message { role: "user".to_string(), content: prompt },
    ];

    let response = client.chat(&state.model, messages).await.map_err(|e| e.to_string())?;

    // è§£æ JSON å“åº”
    serde_json::from_str(&response).map_err(|e| format!("è§£æå¤±è´¥: {}", e))
}

#[tauri::command]
pub async fn auto_categorize(
    state: State<'_, AppState>,
    task: String,
) -> Result<String, String> {
    let client_guard = state.ai_client.read().await;
    let client = client_guard.as_ref().ok_or("è¯·å…ˆé…ç½® API Key")?;

    let prompt = AUTO_CATEGORIZE_PROMPT.replace("{task}", &task);
    let messages = vec![
        Message { role: "user".to_string(), content: prompt },
    ];

    client.chat(&state.model, messages).await.map_err(|e| e.to_string())
}
```

### å‰ç«¯ AI Hook

```typescript
// src/hooks/useAI.ts
import { invoke } from '@tauri-apps/api/core';
import { useState } from 'react';

interface SubTask {
  title: string;
  priority: number;
}

export function useAI() {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const setApiKey = async (apiKey: string) => {
    try {
      await invoke('set_api_key', { apiKey });
    } catch (e) {
      setError(String(e));
      throw e;
    }
  };

  const breakdownTask = async (task: string): Promise<SubTask[]> => {
    setIsLoading(true);
    setError(null);
    try {
      return await invoke('breakdown_task', { task });
    } catch (e) {
      setError(String(e));
      throw e;
    } finally {
      setIsLoading(false);
    }
  };

  const autoCategorize = async (task: string): Promise<string> => {
    return await invoke('auto_categorize', { task });
  };

  const parseNaturalLanguage = async (input: string) => {
    return await invoke('parse_natural_language', { input });
  };

  return { 
    setApiKey, 
    breakdownTask, 
    autoCategorize,
    parseNaturalLanguage,
    isLoading, 
    error 
  };
}
```

## ä¾èµ–æ¸…å•

### Rust (src-tauri/Cargo.toml)

```toml
[dependencies]
tauri = { version = "2", features = ["tray-icon", "devtools"] }
tauri-plugin-shell = "2"
tauri-plugin-store = "2"         # éæ•æ„Ÿé…ç½®å­˜å‚¨ (ä¾‹å¦‚æ¨¡å‹)
keyring = "2"                    # macOS Keychain å­˜å‚¨ API Key
serde = { version = "1", features = ["derive"] }
serde_json = "1"
tokio = { version = "1", features = ["full"] }
sqlx = { version = "0.8", features = ["runtime-tokio", "sqlite"] }
uuid = { version = "1", features = ["v4", "serde"] }
chrono = { version = "0.4", features = ["serde"] }
log = "0.4"
env_logger = "0.11"

# HTTP å®¢æˆ·ç«¯ (è°ƒç”¨ç™¾ç‚¼ API)
reqwest = { version = "0.12", features = ["json", "stream"] }
futures = "0.3"                   # æµå¼å“åº”å¤„ç†

[build-dependencies]
tauri-build = { version = "2", features = [] }
```

### Node.js (package.json)

```json
{
  "dependencies": {
    "@tauri-apps/api": "^2",
    "@tauri-apps/plugin-shell": "^2",
    "react": "^18",
    "react-dom": "^18",
    "zustand": "^4",
    "@radix-ui/react-icons": "^1",
    "class-variance-authority": "^0.7",
    "clsx": "^2",
    "tailwind-merge": "^2",
    "date-fns": "^3"
  },
  "devDependencies": {
    "@tauri-apps/cli": "^2",
    "@types/react": "^18",
    "@types/react-dom": "^18",
    "typescript": "^5",
    "vite": "^5",
    "@vitejs/plugin-react": "^4",
    "tailwindcss": "^3",
    "autoprefixer": "^10",
    "postcss": "^8"
  }
}
```

## å¼€å‘é‡Œç¨‹ç¢‘

| é˜¶æ®µ | æ—¶é—´ | äº¤ä»˜ç‰© |
|------|------|--------|
| Phase 1 | Day 1-3 | å¯è¿è¡Œçš„åŸºç¡€ ToDo åº”ç”¨ |
| Phase 2 | Day 4-6 | å®Œæ•´åŠŸèƒ½çš„ä»»åŠ¡ç®¡ç† |
| Phase 3 | Day 7-9 | ç™¾ç‚¼ API é›†æˆå®Œæˆ |
| Phase 4 | Day 10-11 | AI äº¤äº’ä¼˜åŒ– |
| Phase 5 | Day 12-13 | æ‰“åŒ…å‘å¸ƒ |

**æ€»è®¡: çº¦ 2 å‘¨**

## é£é™©ä¸å¯¹ç­–

| é£é™© | å½±å“ | å¯¹ç­– |
|------|------|------|
| API è°ƒç”¨å¤±è´¥ | AI åŠŸèƒ½ä¸å¯ç”¨ | è‡ªåŠ¨é‡è¯•ã€3æ¬¡åæç¤ºç”¨æˆ·ã€ç¦»çº¿é™çº§æ–¹æ¡ˆ |
| API Key æ³„éœ² | å®‰å…¨é£é™© | ä½¿ç”¨ tauri-plugin-store åŠ å¯†å­˜å‚¨ã€ä¸åœ¨æ—¥å¿—ä¸­æ‰“å° |
| AI è¾“å‡ºè´¨é‡ä¸ç¨³å®š | åŠŸèƒ½ä¸å¯ç”¨ | å®Œå–„ Promptã€JSON è¾“å‡ºéªŒè¯ã€é‡è¯•æœºåˆ¶ |
| ç½‘ç»œå»¶è¿Ÿé«˜ | ç”¨æˆ·ä½“éªŒå·® | æµå¼è¾“å‡ºã€åŠ è½½åŠ¨ç”»ã€å“åº”ç¼“å­˜ |
| API è´¹ç”¨è¶…æ”¯ | æˆæœ¬å¤±æ§ | é»˜è®¤ä½¿ç”¨ä½ä»·æ¨¡å‹ã€ç”¨é‡ç»Ÿè®¡æ˜¾ç¤ºã€è®¾ç½®é¢„è­¦ |

## GitHub å¼€æºè®¾ç½®

### ä»“åº“ç»“æ„

```
ai-todo/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â””â”€â”€ release.yml        # macOS è‡ªåŠ¨æ„å»ºå‘å¸ƒ
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/
â”‚   â””â”€â”€ PULL_REQUEST_TEMPLATE.md
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ README_CN.md          # ä¸­æ–‡æ–‡æ¡£
â”‚   â””â”€â”€ API_KEY_GUIDE.md      # API Key é…ç½®æŒ‡å—
â”œâ”€â”€ README.md
â”œâ”€â”€ LICENSE                    # MIT License
â””â”€â”€ CHANGELOG.md
```

### README.md å†…å®¹è¦ç‚¹

```markdown
# ç•ªèŒ„todo ğŸ“âœ¨

> å…è´¹å¼€æºçš„æ™ºèƒ½ä»»åŠ¡ç®¡ç†åº”ç”¨ - macOS ä¸“ç‰ˆ

## ç‰¹æ€§

- ğŸ **macOS ä¸“å±** - é’ˆå¯¹ Apple Silicon (M1/M2/M3/M4) ä¼˜åŒ–
- âœ… å®Œå…¨å…è´¹,æ°¸ä¹…å¼€æº
- ğŸ¤– AI æ™ºèƒ½ä»»åŠ¡æ‹†è§£/åˆ†ç±»
- ğŸ”‘ ç”¨æˆ·è‡ªå¸¦ç™¾ç‚¼ API Key,æ•°æ®å®Œå…¨æœ¬åœ°

## ç³»ç»Ÿè¦æ±‚

- macOS 11.0 (Big Sur) æˆ–æ›´é«˜ç‰ˆæœ¬
- Apple Silicon èŠ¯ç‰‡ (M1/M2/M3/M4)

## å¿«é€Ÿå¼€å§‹

1. ä¸‹è½½ DMG: [Releases](releases)
2. è·å–ç™¾ç‚¼ API Key: [API Key é…ç½®æŒ‡å—](docs/API_KEY_GUIDE.md)
3. åœ¨åº”ç”¨è®¾ç½®ä¸­è¾“å…¥ API Key
4. å¼€å§‹ä½¿ç”¨!

## License

MIT
```

### GitHub Actions - macOS å‘å¸ƒ

```yaml
# .github/workflows/release.yml
name: Release

on:
  push:
    tags: ['v*']

jobs:
  release:
    permissions:
      contents: write
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - uses: dtolnay/rust-toolchain@stable
        with:
          targets: aarch64-apple-darwin
      - name: Install dependencies
        run: npm ci
      - uses: tauri-apps/tauri-action@v0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tagName: v__VERSION__
          releaseName: 'ç•ªèŒ„todo v__VERSION__'
          releaseBody: 'macOS (Apple Silicon) ç‰ˆæœ¬'
          releaseDraft: true
          prerelease: false
          args: --target aarch64-apple-darwin
```

## åç»­æ‰©å±•

* ğŸ“… æ—¥å†è§†å›¾é›†æˆ
* ğŸ”„ iCloud åŒæ­¥ (macOS åŸç”Ÿ)
* ğŸ“± iOS ç‰ˆæœ¬ (Tauri 2.x æ”¯æŒ)
* ğŸ—£ï¸ è¯­éŸ³è¾“å…¥ (macOS è¯­éŸ³è¯†åˆ«)
* ğŸ”Œ æ”¯æŒæ›´å¤š AI æä¾›å•† (OpenAI, Claude ç­‰)
* ğŸ’» Intel Mac æ”¯æŒ (x86_64-apple-darwin)
